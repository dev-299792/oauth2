<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Add User Profile</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body class="bg-light d-flex flex-column min-vh-100">

<header class="bg-primary text-white shadow">
    <nav class="container px-4 py-3 d-flex justify-content-between align-items-center">
        <a th:href="@{/}" class="text-white h4 fw-bold mb-0">SecureLogin</a>
        <a th:href="@{/add-profile}" class="text-white text-decoration-none">Add Profile</a>
    </nav>
</header>

<main class="flex-grow-1 container px-4 py-5 d-flex flex-column align-items-center justify-content-center">
    <div class="bg-white p-5 rounded-3 shadow-sm w-100" style="max-width: 600px;">
        <h1 class="h3 fw-bold text-center text-dark mb-4">Add User Profile</h1>

        <!-- Form -->
        <div th:unless="${savedUser}">
            <form th:action="@{/add-profile}" th:object="${userProfileForm}" method="post">

                <!-- Profile -->
                <h5 class="fw-semibold mb-3">Profile</h5>
                <div class="mb-3">
                    <label for="firstName" class="form-label">First Name</label>
                    <input type="text" id="firstName" th:field="*{profile.firstName}" class="form-control">
                </div>
                <div class="mb-3">
                    <label for="lastName" class="form-label">Last Name</label>
                    <input type="text" id="lastName" th:field="*{profile.lastName}" class="form-control">
                </div>
                <div class="mb-4">
                    <label for="dob" class="form-label">Date of Birth</label>
                    <input type="date" id="dob" th:field="*{profile.dateOfBirth}" class="form-control">
                </div>

                <!-- Address -->
                <h5 class="fw-semibold mb-3">Address</h5>
                <div class="mb-3">
                    <label for="street" class="form-label">Street</label>
                    <input type="text" id="street" th:field="*{address.street}" class="form-control">
                </div>
                <div class="mb-3">
                    <label for="city" class="form-label">City</label>
                    <input type="text" id="city" th:field="*{address.city}" class="form-control">
                </div>
                <div class="mb-3">
                    <label for="state" class="form-label">State</label>
                    <input type="text" id="state" th:field="*{address.state}" class="form-control">
                </div>
                <div class="mb-3">
                    <label for="postalCode" class="form-label">Postal Code</label>
                    <input type="text" id="postalCode" th:field="*{address.postalCode}" class="form-control">
                </div>
                <div class="mb-3">
                    <label for="country" class="form-label">Country</label>
                    <input type="text" id="country" th:field="*{address.country}" class="form-control">
                </div>

                <!-- Phone -->
                <h5 class="fw-semibold mb-3">Phone</h5>
                <div class="mb-3">
                    <label for="number" class="form-label">Phone Number</label>
                    <input type="text" id="number" th:field="*{phone}" class="form-control">
                </div>

                <button type="submit" class="w-100 btn btn-primary btn-lg mt-3">Save Profile</button>
            </form>
        </div>

        <!-- Success Section -->
        <div th:if="${savedUser}" class="text-center">
            <p class="text-success fw-bold h5 mb-3">Profile Saved Successfully!</p>
            <div class="bg-light p-4 rounded border">
                <h2 class="h5 fw-semibold mb-3">Saved Details</h2>
                <table class="table table-borderless table-sm mb-0">
                    <tbody>
                    <tr th:each="entry : ${savedUser.entrySet()}">
                        <td th:text="${entry.key}" class="fw-semibold text-muted"></td>
                        <td th:text="${entry.value}" class="text-dark"></td>
                    </tr>
                    </tbody>
                </table>
            </div>
            <div class="mt-4 d-grid gap-2 d-md-block">
                <a th:href="@{/}" class="btn btn-outline-primary btn-lg">Go to Homepage</a>
            </div>
        </div>
    </div>
</main>

<footer class="bg-secondary text-muted text-center py-3 mt-auto">
    &copy; 2025 SecureLogin. All rights reserved.
</footer>
</body>
</html>
